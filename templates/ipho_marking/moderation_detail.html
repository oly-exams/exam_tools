{% extends "ipho_marking/base.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% load editor_extras %}

{% block extra-head %}
{% endblock %}

{% block pageheader %}<h1>Moderation {{ delegation.country }} ({{ delegation.name }})</h1>{% endblock %}

{% block page-content %}

  <h2>Points for {{ question.exam.name }} - {{ question.name }}</h2>

  <form method="POST">
  {% csrf_token %}
  {% for student,markings_official,markings_delegation,forms in student_forms %}
    {{ forms.management_form }}

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">{{ student.first_name }} {{ student.last_name }} ({{ student.code }})</h2>
      </div>

      <table class="table table-strided">
        <tr>
          <th></th>
          {% for item in metas %}
            <th>{{ item.name }} ({{ item.max_points }})</th>
          {% endfor %}
        </tr>

        <tr>
          <th>Official</th>
          {% for item in markings_official %}
            <td>{{ item.points|default_if_none:"-" }}</td>
          {% endfor %}
        </tr>

        <tr>
          <th>Delegation</th>
          {% for item in markings_delegation %}
            <td>{{ item.points|default_if_none:"-" }}</td>
          {% endfor %}
        </tr>

        <tr>
          <th>Moderation</th>
          {% for form in forms %}
            <td>{{ form.id }}<div class="{{ form.errors|yesno:"has-error," }}">{{ form.points }}</div></td>
          {% endfor %}
        </tr>

      </table>
    </div>
  {% endfor %}

  <div>
    <button type="submit" class="btn btn-primary"><i class="fa fa-check" aria-hidden="true"></i> Submit</buton>
  </div>

  </form>

{% endblock %}

{% block extra-script %}
{% endblock %}
