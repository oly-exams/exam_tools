<!DOCTYPE html>
{% load static %}
<html>
    <head>
        <meta charset="utf-8">
        <title>Test CKEditor</title>
        <script src="//cdn.ckeditor.com/4.4.6/standard/ckeditor.js"></script>
        
        <link href="{% static "exam/exam.css" %}" rel="stylesheet">
        <link href="{% static "mathquill/mathquill.css" %}" rel="stylesheet">
        
    </head>
    <body>
        <textarea name="editor1" id="editor1">
      {% block content %}{% endblock %}
        </textarea>
        
        <script src="{% static "jquery/js/jquery-1.8.2.min.js" %}"></script>
        
        <script src="{% static "mathquill/mathquill.min.js" %}"></script>
        
        <script type="text/x-mathjax-config">
          MathJax.Hub.Config({   jax: 	["input/TeX", "output/HTML-CSS"],
          			 								tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
        </script>
        <script type="text/javascript"
          src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        </script>
        
        <script>
        		CKEDITOR.plugins.addExternal( 'mathedit', '{% static "mathedit/" %}', 'plugin.js' );
        
            
            $(function(){
            	var newtext = $("#editor1").html().replace(/\$(.+?)\$/g, '<img src="http://latex.codecogs.com/svg.latex?$1" />');
            	$("#editor1").html(newtext);

							
							CKEDITOR.replace( 'editor1', {
							    extraPlugins: 'mathedit',
							    height : '600px',
							});
            });
            
        </script>
    </body>
</html>