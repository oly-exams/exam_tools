build:testing_cypress:
    extends: .build:build_cached_push
    variables:
        SERVICE_NAME: testing_cypress
    rules:
        - if: '$DOCKER_CACHE == "0"'
        - if: '$IMG_NAME != $IMG_COMPARE'
        - changes:
            - "docker/testing_cypress/*"

test:testing_cypress:
    extends: .test:pull_and_run_2
    variables:
        SERVICE_NAME_1: testing_cypress
        SERVICE_NAME_2: django_server
        ENV_FILE: docker/env/testing_cypress.env
    artifacts:
        paths:
            - e2e/cypress/videos
            - e2e/cypress/screenshots
        reports:
            junit: e2e/cypress/reports/*.xml
